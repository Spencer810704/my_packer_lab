block:
  id: "app-openresty"
  name: "OpenResty Web Server"
  category: "application"
  version: "1.21.4"
  description: "High-performance web server based on Nginx with Lua support"
  
  requires:
    - "linux-os"
    
  provides:
    - "web-server"
    - "nginx"
    - "lua-runtime"
    
  parameters:
    - name: "version"
      type: "string"
      default: "1.21.4"
      description: "OpenResty version"
      
    - name: "port"
      type: "number"
      default: 80
      description: "HTTP port"
      
    - name: "enable_ssl"
      type: "boolean"
      default: false
      description: "Enable SSL/TLS support"
      
  os_support:
    - os_family: "debian"
      os_versions: ["20.04", "22.04"]
      scripts:
        install: "scripts/debian/install.sh"
        configure: "scripts/common/configure.sh"
        test_page: "scripts/common/add-test-page.sh"
        validate: "scripts/common/validate.sh"
    
    - os_family: "rhel"
      os_versions: ["7", "8", "9"]
      scripts:
        install: "scripts/rhel/install.sh"
        configure: "scripts/common/configure.sh"
        test_page: "scripts/common/add-test-page.sh"
        validate: "scripts/common/validate.sh"
    
    - os_family: "amazon-linux"
      os_versions: ["2", "2023"]
      scripts:
        install: "scripts/amazon-linux/install.sh"
        configure: "scripts/common/configure.sh"
        test_page: "scripts/common/add-test-page.sh"
        validate: "scripts/common/validate.sh"
    
  execution_order: 60